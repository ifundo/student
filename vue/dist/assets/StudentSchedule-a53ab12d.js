/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css               *//* empty css                */import{l as U,o as c,c as w,a as m,d as t,b as _,w as l,m as z,n as D,q as B,s as M,v as T,x as V,k as u,e as b,f as N,z as A,y as p,A as P,B as $,C as q}from"./index-0cb31f90.js";import{r as f}from"./request-7700de20.js";const J={class:"card",style:{"margin-top":"10px","margin-bottom":"10px"}},O={class:"card",style:{"margin-top":"10px"}},j={class:"card",style:{"margin-top":"10px"}},G={class:"dialog-footer"},ae={__name:"StudentSchedule",setup(H){const e=U({name:"",no:"",tableData:[],total:0,pageNum:1,pageSize:3,user:JSON.parse(localStorage.getItem("student-user")||{}),gradeForm:{},gradeFormVisible:!1}),d=()=>{const r={pageNum:e.pageNum,pageSize:e.pageSize,courseName:e.name,courseNo:e.no};e.user.role==="STUDENT"&&(r.studentId=e.user.id),f.get("/selectcourse/selectPage",{params:r}).then(o=>{var n,s;e.tableData=((n=o.data)==null?void 0:n.list)||[],e.total=((s=o.data)==null?void 0:s.total)||0})};d();const F=()=>{d()},x=()=>{e.name="",e.no="",d()},y=r=>{A.confirm("删除的数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(o=>{f.delete("/selectcourse/deleteCourse/"+r).then(n=>{n.code==="200"?(p.success("操作成功"),d()):p.error(n.msg)})}).catch(o=>{p({type:"info",message:"删除取消"})})},C=r=>{e.gradeFormVisible=!0,e.gradeForm.courseName=r.courseName,e.gradeForm.studentName=r.studentName,e.gradeForm.studentId=r.studentId,e.gradeForm.courseId=r.courseId},k=()=>{f.post("/grade/add",e.gradeForm).then(r=>{r.code==="200"?(e.gradeFormVisible=!1,p.success("操作成功"),d()):p.error(r.msg)})};return(r,o)=>{const n=z,s=D,i=P,v=B,E=M,g=$,S=q,h=T;return c(),w("div",null,[m("div",J,[t(n,{style:{width:"260px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.name=a),placeholder:"请输入课程名称查询:","prefix-icon":_(V)},null,8,["modelValue","prefix-icon"]),t(n,{style:{width:"260px","margin-right":"10px"},modelValue:e.no,"onUpdate:modelValue":o[1]||(o[1]=a=>e.no=a),placeholder:"请输入课程编号查询:","prefix-icon":_(V)},null,8,["modelValue","prefix-icon"]),t(s,{type:"primary",style:{"margin-left":"10px"},onClick:d},{default:l(()=>[u("查询")]),_:1}),t(s,{type:"info",onClick:x},{default:l(()=>[u("重置")]),_:1})]),m("div",O,[m("div",null,[t(v,{data:e.tableData,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"id",label:"序号",width:"80"}),t(i,{prop:"courseName",label:"课程名称"}),t(i,{prop:"courseNo",label:"课程编号"}),e.user.role==="ADMIN"?(c(),b(i,{key:0,prop:"studentName",label:"学生名称"})):N("",!0),t(i,{label:"操 作",width:"180px"},{default:l(a=>[t(s,{type:"danger",onClick:I=>y(a.row.courseId)},{default:l(()=>[u("删 除")]),_:2},1032,["onClick"]),e.user.role==="ADMIN"?(c(),b(s,{key:0,type:"primary",onClick:I=>C(a.row)},{default:l(()=>[u("打 分")]),_:2},1032,["onClick"])):N("",!0)]),_:1})]),_:1},8,["data"])])]),m("div",j,[t(E,{"current-page":e.pageNum,"onUpdate:currentPage":o[2]||(o[2]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":o[3]||(o[3]=a=>e.pageSize=a),onCurrentChange:F,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),m("div",null,[t(h,{width:"30%",modelValue:e.gradeFormVisible,"onUpdate:modelValue":o[9]||(o[9]=a=>e.gradeFormVisible=a),title:"成绩信息"},{footer:l(()=>[m("span",G,[t(s,{onClick:o[8]||(o[8]=a=>e.gradeFormVisible=!1)},{default:l(()=>[u("取 消")]),_:1}),t(s,{type:"primary",onClick:k},{default:l(()=>[u("保 存")]),_:1})])]),default:l(()=>[t(S,{model:e.gradeForm,"label-width":"100px","label-position":"right",style:{"margin-right":"40px"}},{default:l(()=>[t(g,{label:"课程名称"},{default:l(()=>[t(n,{modelValue:e.gradeForm.courseName,"onUpdate:modelValue":o[4]||(o[4]=a=>e.gradeForm.courseName=a),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),t(g,{label:"学生名称"},{default:l(()=>[t(n,{modelValue:e.gradeForm.studentName,"onUpdate:modelValue":o[5]||(o[5]=a=>e.gradeForm.studentName=a),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),t(g,{label:"学生分数"},{default:l(()=>[t(n,{modelValue:e.gradeForm.score,"onUpdate:modelValue":o[6]||(o[6]=a=>e.gradeForm.score=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(g,{label:"成绩评价"},{default:l(()=>[t(n,{modelValue:e.gradeForm.comment,"onUpdate:modelValue":o[7]||(o[7]=a=>e.gradeForm.comment=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}};export{ae as default};
