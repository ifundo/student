/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css               *//* empty css                */import{l as z,o as d,c as T,a as i,d as o,b as V,w as l,m as h,n as I,q as B,s as M,v as A,x as k,k as u,e as f,f as c,z as J,y as b,A as O,B as $,C as G}from"./index-0cb31f90.js";import{r as N}from"./request-7700de20.js";const P={class:"card",style:{"margin-top":"10px","margin-bottom":"10px"}},q={class:"card",style:{"margin-top":"10px"}},j={class:"card",style:{"margin-top":"10px"}},H={class:"dialog-footer"},le={__name:"GradeMark",setup(K){const e=z({courseName:"",studentName:"",tableData:[],total:0,pageNum:1,pageSize:3,user:JSON.parse(localStorage.getItem("student-user")||{}),form:{},feedbackFromVisable:!1}),p=()=>{const n={pageNum:e.pageNum,pageSize:e.pageSize,courseName:e.courseName,studentName:e.studentName};e.user.role==="STUDENT"&&(n.studentId=e.user.id),N.get("/grade/selectPage",{params:n}).then(t=>{var r,s;e.tableData=((r=t.data)==null?void 0:r.list)||[],e.total=((s=t.data)==null?void 0:s.total)||0})};p();const y=()=>{p()},x=()=>{e.courseName="",e.studentName="",p()},C=n=>{J.confirm("删除的数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(t=>{N.delete("/grade/delete/"+n).then(r=>{r.code==="200"?(b.success("操作成功"),p()):b.error(r.msg)})}).catch(t=>{b({type:"info",message:"删除取消"})})},S=n=>{e.feedbackFromVisable=!0,e.form=JSON.parse(JSON.stringify(n))},E=()=>{N.put("/grade/update",e.form).then(n=>{n.code==="200"?(e.feedbackFromVisable=!1,b.success("操作成功"),p()):b.error(n.msg)})},v=n=>{e.feedbackFromVisable=!0,e.form=JSON.parse(JSON.stringify(n))};return(n,t)=>{const r=h,s=I,m=O,w=B,U=M,g=$,D=G,F=A;return d(),T("div",null,[i("div",P,[o(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.courseName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.courseName=a),placeholder:"请输入课程名称查询:","prefix-icon":V(k)},null,8,["modelValue","prefix-icon"]),o(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.studentName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.studentName=a),placeholder:"请输入学生名称查询:","prefix-icon":V(k)},null,8,["modelValue","prefix-icon"]),o(s,{type:"primary",style:{"margin-left":"10px"},onClick:p},{default:l(()=>[u("查询")]),_:1}),o(s,{type:"info",onClick:x},{default:l(()=>[u("重置")]),_:1})]),i("div",q,[i("div",null,[o(w,{data:e.tableData,style:{width:"100%"}},{default:l(()=>[o(m,{prop:"id",label:"序号",width:"80"}),o(m,{prop:"courseName",label:"课程名称"}),o(m,{prop:"studentName",label:"学生名称"}),o(m,{prop:"score",label:"课程分数"}),o(m,{prop:"comment",label:"老师评语"}),o(m,{prop:"feedback",label:"学生反馈"}),o(m,{label:"操 作",width:"180px"},{default:l(a=>[e.user.role==="ADMIN"?(d(),f(s,{key:0,type:"danger",onClick:_=>C(a.row.id)},{default:l(()=>[u("删 除")]),_:2},1032,["onClick"])):c("",!0),e.user.role==="ADMIN"?(d(),f(s,{key:1,type:"primary",onClick:_=>v(a.row)},{default:l(()=>[u("编 辑")]),_:2},1032,["onClick"])):c("",!0),e.user.role==="STUDENT"?(d(),f(s,{key:2,type:"primary",onClick:_=>S(a.row)},{default:l(()=>[u("反 馈")]),_:2},1032,["onClick"])):c("",!0)]),_:1})]),_:1},8,["data"])])]),i("div",j,[o(U,{"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":t[3]||(t[3]=a=>e.pageSize=a),onCurrentChange:y,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),i("div",null,[o(F,{width:"30%",modelValue:e.feedbackFromVisable,"onUpdate:modelValue":t[10]||(t[10]=a=>e.feedbackFromVisable=a),title:"反馈信息"},{footer:l(()=>[i("span",H,[o(s,{onClick:t[9]||(t[9]=a=>e.feedbackFromVisable=!1)},{default:l(()=>[u("取 消")]),_:1}),o(s,{type:"primary",onClick:E},{default:l(()=>[u("保 存")]),_:1})])]),default:l(()=>[o(D,{model:e.form,"label-width":"100px","label-position":"right",style:{"margin-right":"40px"}},{default:l(()=>[o(g,{label:"课程名称"},{default:l(()=>[o(r,{modelValue:e.form.courseName,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.courseName=a),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),o(g,{label:"学生名称"},{default:l(()=>[o(r,{modelValue:e.form.studentName,"onUpdate:modelValue":t[5]||(t[5]=a=>e.form.studentName=a),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),e.user.role==="ADMIN"?(d(),f(g,{key:0,label:"课程评分"},{default:l(()=>[o(r,{modelValue:e.form.score,"onUpdate:modelValue":t[6]||(t[6]=a=>e.form.score=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})):c("",!0),e.user.role==="ADMIN"?(d(),f(g,{key:1,label:"老师评语"},{default:l(()=>[o(r,{modelValue:e.form.comment,"onUpdate:modelValue":t[7]||(t[7]=a=>e.form.comment=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})):c("",!0),e.user.role==="STUDETN"?(d(),f(g,{key:2,label:"学生评价"},{default:l(()=>[o(r,{type:"textarea",modelValue:e.form.feedback,"onUpdate:modelValue":t[8]||(t[8]=a=>e.form.feedback=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}};export{le as default};
