/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css              *//* empty css             *//* empty css               *//* empty css                  *//* empty css               *//* empty css               *//* empty css                */import{l as V,D as R,o as c,c as y,a as p,d as a,b as v,w as t,m as J,n as O,q as $,s as G,v as H,x,k as i,t as j,e as w,f as K,y as f,z as L,A as Q,F as W,B as X,G as Z,H as ee,I as ae,J as le,C as oe,h as te}from"./index-eeec9794.js";import{r as _}from"./request-fdbd87a6.js";const re={class:"card",style:{"margin-top":"10px","margin-bottom":"10px"}},ne={class:"card",style:{"margin-top":"10px"}},se={class:"card",style:{"margin-top":"10px"}},me=["src"],ie={class:"dialog-footer"},ke={__name:"Student",setup(de){const e=V({username:"",name:"",role:"STUDENT",tableData:[],total:0,pageNum:1,pageSize:8,formVisible:!1,form:{}}),u=()=>{_.get("/account/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,username:e.username,name:e.name}}).then(n=>{var l,r;e.tableData=((l=n.data)==null?void 0:l.list)||[],e.total=((r=n.data)==null?void 0:r.total)||0})};u();const h=()=>{u()},k=()=>{e.username="",e.name="",u()},E=V({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),g=R(),C=()=>{e.form={},e.formVisible=!0},S=()=>{g.value.validate(n=>{n&&_.request({url:e.form.id?"/account/updateAccountById":"/account/addAccount",method:e.form.id?"PUT":"POST",data:e.form}).then(l=>{l.code==="200"?(f.success("操作成功"),u(),e.formVisible=!1):f.error(l.msg)})})},U=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},D=n=>{L.confirm("删除的数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(l=>{_.delete("/account/deleteAccountById/"+n).then(r=>{r.code==="200"?(f.success("操作成功"),u()):f.error(r.msg)})}).catch(l=>{f({type:"info",message:"删除取消"})})},N=n=>{e.form.avatar=n.data};return(n,l)=>{const r=J,d=O,s=Q,z=W,B=$,I=G,m=X,b=Z,Y=ee,T=ae,M=te,P=le,q=oe,A=H;return c(),y("div",null,[p("div",re,[a(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=o=>e.username=o),placeholder:"请输入账号查询:","prefix-icon":v(x)},null,8,["modelValue","prefix-icon"]),a(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.name=o),placeholder:"请输入名称查询:","prefix-icon":v(x)},null,8,["modelValue","prefix-icon"]),a(d,{type:"primary",style:{"margin-left":"10px"},onClick:u},{default:t(()=>[i("查 询")]),_:1}),a(d,{type:"info",onClick:k},{default:t(()=>[i("重 置")]),_:1})]),p("div",ne,[p("div",null,[a(d,{type:"primary",onClick:C},{default:t(()=>[i("新 增")]),_:1})]),p("div",null,[a(B,{data:e.tableData,style:{width:"100%"}},{default:t(()=>[a(s,{type:"index",label:"序号",width:"80",align:"center"},{default:t(({$index:o})=>[i(j(o+1+(e.pageNum-1)*e.pageSize),1)]),_:1}),a(s,{prop:"username",label:"学生账号"}),a(s,{prop:"name",label:"学生名称"}),a(s,{prop:"phone",label:"学生手机"}),a(s,{prop:"email",label:"学生邮箱"}),a(s,{prop:"sex",label:"学生性别"}),a(s,{prop:"birth",label:"学生生日"}),a(s,{prop:"avatar",label:"学生头像"},{default:t(o=>[o.row.avatar?(c(),w(z,{key:0,src:o.row.avatar,"preview-src-list":[o.row.avatar],style:{width:"40px",height:"40px","border-radius":"5px"}},null,8,["src","preview-src-list"])):K("",!0)]),_:1}),a(s,{label:"操作",width:"180px"},{default:t(o=>[a(d,{type:"primary",onClick:F=>U(o.row)},{default:t(()=>[i("编 辑")]),_:2},1032,["onClick"]),a(d,{type:"danger",onClick:F=>D(o.row.id)},{default:t(()=>[i("删 除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),p("div",se,[a(I,{"current-page":e.pageNum,"onUpdate:currentPage":l[2]||(l[2]=o=>e.pageNum=o),"page-size":e.pageSize,"onUpdate:pageSize":l[3]||(l[3]=o=>e.pageSize=o),onCurrentChange:h,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),p("div",null,[a(A,{width:"30%",modelValue:e.formVisible,"onUpdate:modelValue":l[12]||(l[12]=o=>e.formVisible=o),title:"学生信息","destroy-on-close":""},{footer:t(()=>[p("span",ie,[a(d,{onClick:l[11]||(l[11]=o=>e.formVisible=!1)},{default:t(()=>[i("取 消")]),_:1}),a(d,{type:"primary",onClick:S},{default:t(()=>[i("保 存")]),_:1})])]),default:t(()=>[a(q,{model:e.form,rules:E,ref_key:"formRef",ref:g,"label-width":"100px","label-position":"right",style:{"margin-right":"40px"}},{default:t(()=>[a(m,{label:"学生账号",prop:"username"},{default:t(()=>[a(r,{modelValue:e.form.username,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.username=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生密码",prop:"password"},{default:t(()=>[a(r,{"show-password":"",modelValue:e.form.password,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.password=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生名称"},{default:t(()=>[a(r,{modelValue:e.form.name,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生手机"},{default:t(()=>[a(r,{modelValue:e.form.phone,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.phone=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生邮箱"},{default:t(()=>[a(r,{modelValue:e.form.email,"onUpdate:modelValue":l[8]||(l[8]=o=>e.form.email=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生性别"},{default:t(()=>[a(Y,{modelValue:e.form.sex,"onUpdate:modelValue":l[9]||(l[9]=o=>e.form.sex=o)},{default:t(()=>[a(b,{label:"男"}),a(b,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"学生生日"},{default:t(()=>[a(T,{modelValue:e.form.birth,"onUpdate:modelValue":l[10]||(l[10]=o=>e.form.birth=o),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(m,{label:"学生头像"},{default:t(()=>[a(P,{class:"avatar-uploader",action:"http://localhost:9090/files/uploadFile","show-file-list":!1,"on-success":N},{default:t(()=>[e.form.avatar?(c(),y("img",{key:0,src:e.form.avatar,class:"avatar"},null,8,me)):(c(),w(M,{key:1,class:"el-icon-plus avatar-uploader-icon"}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])])}}};export{ke as default};
