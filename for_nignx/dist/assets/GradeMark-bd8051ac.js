/* empty css             *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css               *//* empty css                */import{l as z,o as u,c as h,a as p,d as t,b as V,w as l,m as I,n as B,q as M,s as A,v as J,x as k,k as s,t as O,e as c,f,z as T,y as b,A as $,B as G,C as P}from"./index-eeec9794.js";import{r as N}from"./request-fdbd87a6.js";const q={class:"card",style:{"margin-top":"10px","margin-bottom":"10px"}},j={class:"card",style:{"margin-top":"10px"}},H={class:"card",style:{"margin-top":"10px"}},K={class:"dialog-footer"},re={__name:"GradeMark",setup(L){const e=z({courseName:"",accountName:"",tableData:[],total:0,pageNum:1,pageSize:3,user:JSON.parse(localStorage.getItem("account-user")||{}),form:{},feedbackFromVisable:!1}),i=()=>{const n={pageNum:e.pageNum,pageSize:e.pageSize,courseName:e.courseName,accountName:e.accountName};e.user.role==="account"&&(n.accountId=e.user.id),N.get("/grade/selectPage",{params:n}).then(a=>{var r,m;e.tableData=((r=a.data)==null?void 0:r.list)||[],e.total=((m=a.data)==null?void 0:m.total)||0})};i();const y=()=>{i()},x=()=>{e.courseName="",e.accountName="",i()},C=n=>{T.confirm("删除的数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(a=>{N.delete("/grade/delete/"+n).then(r=>{r.code==="200"?(b.success("操作成功"),i()):b.error(r.msg)})}).catch(a=>{b({type:"info",message:"删除取消"})})},S=n=>{e.feedbackFromVisable=!0,e.form=JSON.parse(JSON.stringify(n))},v=()=>{N.put("/grade/update",e.form).then(n=>{n.code==="200"?(e.feedbackFromVisable=!1,b.success("操作成功"),i()):b.error(n.msg)})},w=n=>{e.feedbackFromVisable=!0,e.form=JSON.parse(JSON.stringify(n))};return(n,a)=>{const r=I,m=B,d=$,E=M,D=A,g=G,F=P,U=J;return u(),h("div",null,[p("div",q,[t(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.courseName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.courseName=o),placeholder:"请输入课程名称查询:","prefix-icon":V(k)},null,8,["modelValue","prefix-icon"]),t(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.accountName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.accountName=o),placeholder:"请输入学生名称查询:","prefix-icon":V(k)},null,8,["modelValue","prefix-icon"]),t(m,{type:"primary",style:{"margin-left":"10px"},onClick:i},{default:l(()=>[s("查询")]),_:1}),t(m,{type:"info",onClick:x},{default:l(()=>[s("重置")]),_:1})]),p("div",j,[p("div",null,[t(E,{data:e.tableData,style:{width:"100%"}},{default:l(()=>[t(d,{type:"index",label:"序号",width:"80",align:"center"},{default:l(({$index:o})=>[s(O(o+1+(e.pageNum-1)*e.pageSize),1)]),_:1}),t(d,{prop:"courseName",label:"课程名称"}),t(d,{prop:"accountName",label:"学生名称"}),t(d,{prop:"score",label:"课程分数"}),t(d,{prop:"comment",label:"老师评语"}),t(d,{prop:"feedback",label:"学生反馈"}),t(d,{label:"操 作",width:"180px"},{default:l(o=>[e.user.role==="ADMIN"?(u(),c(m,{key:0,type:"danger",onClick:_=>C(o.row.id)},{default:l(()=>[s("删 除")]),_:2},1032,["onClick"])):f("",!0),e.user.role==="ADMIN"?(u(),c(m,{key:1,type:"primary",onClick:_=>w(o.row)},{default:l(()=>[s("编 辑")]),_:2},1032,["onClick"])):f("",!0),e.user.role==="account"?(u(),c(m,{key:2,type:"primary",onClick:_=>S(o.row)},{default:l(()=>[s("反 馈")]),_:2},1032,["onClick"])):f("",!0)]),_:1})]),_:1},8,["data"])])]),p("div",H,[t(D,{"current-page":e.pageNum,"onUpdate:currentPage":a[2]||(a[2]=o=>e.pageNum=o),"page-size":e.pageSize,"onUpdate:pageSize":a[3]||(a[3]=o=>e.pageSize=o),onCurrentChange:y,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),p("div",null,[t(U,{width:"30%",modelValue:e.feedbackFromVisable,"onUpdate:modelValue":a[10]||(a[10]=o=>e.feedbackFromVisable=o),title:"反馈信息"},{footer:l(()=>[p("span",K,[t(m,{onClick:a[9]||(a[9]=o=>e.feedbackFromVisable=!1)},{default:l(()=>[s("取 消")]),_:1}),t(m,{type:"primary",onClick:v},{default:l(()=>[s("保 存")]),_:1})])]),default:l(()=>[t(F,{model:e.form,"label-width":"100px","label-position":"right",style:{"margin-right":"40px"}},{default:l(()=>[t(g,{label:"课程名称"},{default:l(()=>[t(r,{modelValue:e.form.courseName,"onUpdate:modelValue":a[4]||(a[4]=o=>e.form.courseName=o),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),t(g,{label:"学生名称"},{default:l(()=>[t(r,{modelValue:e.form.accountName,"onUpdate:modelValue":a[5]||(a[5]=o=>e.form.accountName=o),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),e.user.role==="ADMIN"?(u(),c(g,{key:0,label:"课程评分"},{default:l(()=>[t(r,{modelValue:e.form.score,"onUpdate:modelValue":a[6]||(a[6]=o=>e.form.score=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})):f("",!0),e.user.role==="ADMIN"?(u(),c(g,{key:1,label:"老师评语"},{default:l(()=>[t(r,{modelValue:e.form.comment,"onUpdate:modelValue":a[7]||(a[7]=o=>e.form.comment=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})):f("",!0),e.user.role==="STUDETN"?(u(),c(g,{key:2,label:"学生评价"},{default:l(()=>[t(r,{type:"textarea",modelValue:e.form.feedback,"onUpdate:modelValue":a[8]||(a[8]=o=>e.form.feedback=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})):f("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}};export{re as default};
